(function(){var f,h,e=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("akop",["akop-multi-select","akop-keymap"]);angular.module("akop-keymap",[]).config(["$provide",function(a){return a.constant("KEYCODES",{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps:20,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,
h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,left_window:91,right_window:92,select_key:93,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,numpad_4:100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,"*":106,"+":107,minus:109,decimal_point:110,"%":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,";":186,"=":187,"":188,"-":189,".":190,"/":191,grave_accent:192,"{":219,
"\\":220,"}":221,"'":222})}]);f=function(a){var b,c,d,f;d=function(b,c,a){null==a&&(a=!0);a||b.sort()&&c.sort();return b.length===c.length&&b.every(function(b,a){return b===c[a]})};f=function(c){var a;a=[];c.altKey&&a.push(b("alt"));c.ctrlKey&&a.push(b("ctrl"));c.shiftKey&&a.push(b("shift"));a.push(parseInt(c.keyCode));return a};b=function(b){return a[b]};c=function(a){return _.map(a.split("-"),function(a){return b(a)})};return{codeFor:b,parseCombo:c,comboEventMatch:function(b,a){return d(f(a),c(b),
!1)}}};f.$inject=["KEYCODES"];angular.module("akop-keymap").service("KeymapUtils",f);angular.module("akop-multi-select",[]);h=function(){function a(b,a){this.list=b;this.root=a;this.moveToNext=e(this.moveToNext,this);this.moveToPrev=e(this.moveToPrev,this);this.selectFirst=e(this.selectFirst,this);this.selectLast=e(this.selectLast,this);this.selectNext=e(this.selectNext,this);this.selectPrev=e(this.selectPrev,this);this.root&&this.reset(this.root)}a.prototype.reset=function(b){this.root=b;_.each(this.list,
function(b){return b.selected=!1});this.selected=[];return this.include(this.root,!1)};a.prototype.include=function(b,a){var d;null==a&&(a=!0);d=this._pos(b);if(0>d)throw Error("MultiSelect: Element must be a member of list.");if(a&&!this._isAdjacent(d))return!1;b.selected=!0;this.selected[d]=b;this.cursor=d;return this.selected};a.prototype.exclude=function(b){var a,d;a=this._pos(b);d=this._is_upper(a);a=this._is_lower(a);if(!d&&!a)return!1;b.selected=!1;d?(this.selected.pop(),this.cursor=this._upper_index()):
(this.selected.splice(this._lower_index(),1,void 0),this.cursor=this._lower_index());return this.selected};a.prototype.moveCursorTo=function(a){var c;if(0>a||a>this.list.length-1)return this.selected;c=this.list[a];return c.selected?(c=this._is_desc(a,this.cursor)?1:-1,this.exclude(this.list[a+c])):this.include(c)};a.prototype.selectPrev=function(){return!1===(null!=this.cursor)||0===this.cursor?this.reset(_.last(this.list)):this.reset(this.list[this.cursor-1])};a.prototype.selectNext=function(){return!1===
(null!=this.cursor)||this.cursor===this.list.length-1?this.reset(this.list[0]):this.reset(this.list[this.cursor+1])};a.prototype.selectLast=function(){return this.reset(_.last(this.list))};a.prototype.selectFirst=function(){return this.reset(_.first(this.list))};a.prototype.moveToPrev=function(){return this.moveCursorTo(this.cursor-1)};a.prototype.moveToNext=function(){return this.moveCursorTo(this.cursor+1)};a.prototype._is_asc=function(a,c){return 1===a-c};a.prototype._is_desc=function(a,c){return-1===
a-c};a.prototype._pos=function(a){return this.list.indexOf(a)};a.prototype._isAdjacent=function(a){return a-1===this._upper_index()||a+1===this._lower_index()};a.prototype._upper_index=function(){return this.selected.length-1};a.prototype._lower_index=function(){var a;a=_.filter(this.selected,function(a){return a});return this.selected.indexOf(_.first(a))};a.prototype._is_upper=function(a){return this._upper_index()===a};a.prototype._is_lower=function(a){return this._lower_index()===a};return a}();
angular.module("akop-multi-select").factory("MultiSelect",function(){return h});f=function(a,b,c){return{restrict:"A",link:function(d,f,e){e=c(e.akopMultiSelect)(d)||{};d.multiSelect=new b(e.items);d.keymap||(d.keymap={});_.extend(d.keymap,e.keymap,{up:function(){return d.multiSelect.selectPrev()},down:function(){return d.multiSelect.selectNext()},"shift-up":function(){return d.multiSelect.moveToPrev()},"shift-down":function(){return d.multiSelect.moveToNext()},"alt-down":function(){return d.multiSelect.selectLast()},
"alt-up":function(){return d.multiSelect.selectFirst()}});return f.bind("keydown",function(b){var c,f,e,g;e=d.keymap;g=[];for(c in e)f=e[c],g.push(d.$apply(function(){if(a.comboEventMatch(c,b))return f.call()}));return g})}}};f.$inject=["KeymapUtils","MultiSelect","$parse"];angular.module("akop-multi-select").directive("akopMultiSelect",f)}).call(this);
