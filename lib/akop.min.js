(function(){var e,h,f=function(d,a){return function(){return d.apply(a,arguments)}};angular.module("akop",["akop-multi-select","akop-keymap","akop-query-filter"]);angular.module("akop-keymap",[]).config(["$provide",function(d){return d.constant("KEYCODES",{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps:20,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,
d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,left_window:91,right_window:92,select_key:93,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,numpad_4:100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,"*":106,"+":107,minus:109,decimal_point:110,"%":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,";":186,"=":187,"":188,"-":189,".":190,"/":191,
grave_accent:192,"{":219,"\\":220,"}":221,"'":222})}]);e=function(d){var a,b,c,g;c=function(a,b,c){null==c&&(c=!0);c||a.sort()&&b.sort();return a.length===b.length&&a.every(function(a,c){return a===b[c]})};g=function(b){var c;c=[];b.altKey&&c.push(a("alt"));b.ctrlKey&&c.push(a("ctrl"));b.shiftKey&&c.push(a("shift"));c.push(parseInt(b.keyCode));return c};a=function(a){return d[a]};b=function(b){return _.map(b.split("-"),function(b){return a(b)})};return{codeFor:a,parseCombo:b,comboEventMatch:function(a,
d){return c(g(d),b(a),!1)}}};e.$inject=["KEYCODES"];angular.module("akop-keymap").service("KeymapUtils",e);angular.module("akop-multi-select",[]);h=function(){function d(a,b){this.list=a;this.root=b;this.moveToNext=f(this.moveToNext,this);this.moveToPrev=f(this.moveToPrev,this);this.selectFirst=f(this.selectFirst,this);this.selectLast=f(this.selectLast,this);this.selectNext=f(this.selectNext,this);this.selectPrev=f(this.selectPrev,this);this.root&&this.reset(this.root)}d.prototype.reset=function(a){this.root=
a;_.each(this.list,function(a){return a.selected=!1});this.selected=[];return this.include(this.root,!1)};d.prototype.include=function(a,b){var c;null==b&&(b=!0);c=this._pos(a);if(0>c)throw Error("MultiSelect: Element must be a member of list.");if(b&&!this._isAdjacent(c))return!1;a.selected=!0;this.selected[c]=a;this.cursor=c;return this.selected};d.prototype.exclude=function(a){var b,c;b=this._pos(a);c=this._is_upper(b);b=this._is_lower(b);if(!c&&!b)return!1;a.selected=!1;c?(this.selected.pop(),
this.cursor=this._upper_index()):(this.selected.splice(this._lower_index(),1,void 0),this.cursor=this._lower_index());return this.selected};d.prototype.moveCursorTo=function(a){var b;if(0>a||a>this.list.length-1)return this.selected;b=this.list[a];return b.selected?(b=this._is_desc(a,this.cursor)?1:-1,this.exclude(this.list[a+b])):this.include(b)};d.prototype.selectPrev=function(){return null!=this.cursor===!1||0===this.cursor?this.reset(_.last(this.list)):this.reset(this.list[this.cursor-1])};d.prototype.selectNext=
function(){return null!=this.cursor===!1||this.cursor===this.list.length-1?this.reset(this.list[0]):this.reset(this.list[this.cursor+1])};d.prototype.selectLast=function(){return this.reset(_.last(this.list))};d.prototype.selectFirst=function(){return this.reset(_.first(this.list))};d.prototype.moveToPrev=function(){return this.moveCursorTo(this.cursor-1)};d.prototype.moveToNext=function(){return this.moveCursorTo(this.cursor+1)};d.prototype._is_asc=function(a,b){return 1===a-b};d.prototype._is_desc=
function(a,b){return-1===a-b};d.prototype._pos=function(a){return this.list.indexOf(a)};d.prototype._isAdjacent=function(a){return a-1===this._upper_index()||a+1===this._lower_index()};d.prototype._upper_index=function(){return this.selected.length-1};d.prototype._lower_index=function(){var a;a=_.filter(this.selected,function(a){return a});return this.selected.indexOf(_.first(a))};d.prototype._is_upper=function(a){return this._upper_index()===a};d.prototype._is_lower=function(a){return this._lower_index()===
a};return d}();angular.module("akop-multi-select").factory("MultiSelect",function(){return h});e=function(d,a,b){return{restrict:"A",link:function(c,g,e){e=b(e.akopMultiSelect)(c)||{};c.multiSelect=new a(e.items);c.keymap||(c.keymap={});_.extend(c.keymap,e.keymap,{up:function(){return c.multiSelect.selectPrev()},down:function(){return c.multiSelect.selectNext()},"shift-up":function(){return c.multiSelect.moveToPrev()},"shift-down":function(){return c.multiSelect.moveToNext()},"alt-down":function(){return c.multiSelect.selectLast()},
"alt-up":function(){return c.multiSelect.selectFirst()}});return g.bind("keydown",function(a){var b,e,g,f;g=c.keymap;f=[];for(b in g)e=g[b],f.push(c.$apply(function(){if(d.comboEventMatch(b,a))return e.call()}));return f})}}};e.$inject=["KeymapUtils","MultiSelect","$parse"];angular.module("akop-multi-select").directive("akopMultiSelect",e);angular.module("akop-query-filter",[]);e=function(d){return function(a,b){var c,e,f,p,q,k,l,h,m,n,s,t,r;l=b.group_by;delete b.group_by;k=[];f=_.compact(function(){var a;
a=[];for(p in b)c=b[p],a.push(_.isArray(c)?{attr:p,arg:c}:void 0);return a}());if(f.length)for(m=0,s=f.length;m<s;m++)for(e=f[m],r=e.arg,n=0,t=r.length;n<t;n++)h=r[n],q={},q[e.attr]=h,delete k[e.attr],k.push(q);e=angular.equals(b,{})?a:(k.push(b),_.flatten(_.reduceRight(k,function(b,c){b.push(d("filter")(a,c,!0));return b},[])));if(!l)return e;if(_.any(a,function(a){return void 0===a[l]}))throw Error('serviceQueryFilter: Missing group_by property "'+l+'" for some or all elements in list.');return _.groupBy(e,
l)}};e.$inject=["$filter"];angular.module("akop-query-filter").filter("query",e)}).call(this);
